(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){"use strict";(function(e){var c=a(1),n=a.n(c),r=a(16),s=a(7);a(46);t.a=({userId:t,onSignIn:a,onSignOut:c})=>n.a.createElement("nav",{className:"header"},n.a.createElement("div",null,n.a.createElement(r.b,{to:"/"},n.a.createElement("img",{className:"homeImg",src:(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/home.svg",alt:"Home"})),n.a.createElement(r.b,{to:"/"},n.a.createElement("h1",{className:"homeH1"},"My Baking Recipe"))),t?n.a.createElement("div",{className:"userInfo"},n.a.createElement("p",{className:"userName"},n.a.createElement(r.b,{to:"/"},Object(s.e)(t)("@"))),n.a.createElement("button",{className:"headerButton",type:"button"},"New Recipe"),n.a.createElement("button",{className:"headerButton",type:"button",onClick:c},"Logout"),n.a.createElement("img",{className:"userIcon",src:"assets/images/new-recipe.svg",alt:"New Recipe"}),n.a.createElement("img",{className:"userIcon",src:"assets/images/close-outline.svg",onClick:c,alt:"Logout"})):n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{className:"headerButton",type:"button",onClick:a},"Sign in (Google)"),n.a.createElement("img",{className:"userIcon",src:"assets/images/login-google.svg",onClick:a,alt:"singIn"})))}).call(this,a(23))},37:function(e,t,a){"use strict";(function(e){var c=a(1),n=a.n(c);a(52);t.a=()=>n.a.createElement("div",{className:"theNotFoundModal"},n.a.createElement("img",{className:"theNotFoundImage",src:(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/page-not-found.svg",alt:"recipe"}),n.a.createElement("p",{className:"theNotFoundTitle"},"해당 페이지를 찾을 수 없습니다."))}).call(this,a(23))},38:function(e,t,a){"use strict";(function(e){var c=a(1),n=a.n(c),r=a(16),s=a(7);a(53);t.a=({recipe:t})=>{const{id:a,image:c,title:l,description:i,created:o,userId:m}=t,u=(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/cookie.jpeg";return n.a.createElement("li",{className:"recipeItem"},n.a.createElement(r.b,{to:"/recipe/"+a},n.a.createElement("figure",{className:"card-image",style:{backgroundImage:`url(${c||u})`}},n.a.createElement("img",{src:c||u,alt:"recipe"})),n.a.createElement("div",{className:"card-desc"},n.a.createElement("h1",null,l),n.a.createElement("p",null,i.length>30?i.substring(0,30)+"...":i),n.a.createElement("p",{className:"card-created"},null==o?void 0:o.substr(0,10)),n.a.createElement("p",null,"by"," ",n.a.createElement("strong",null,Object(s.e)(m)("@"))))))}}).call(this,a(23))},46:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var c=a(1),n=a.n(c),r=a(25),s=a.n(r),l=a(15),i=a(16),o=a(5);var m=()=>n.a.createElement("div",{className:"modal"},n.a.createElement("div",{className:"loadingAnimation"})),u=a(34),d=a(19),p=a(20);a(48),a(55),a(50);var g={apiKey:"AIzaSyBWq2ijQg3f9QqIx3gDKsYda0wIeed5zqE",authDomain:"mybakingrecipe.firebaseapp.com",databaseURL:"https://mybakingrecipe-default-rtdb.firebaseio.com",projectId:"mybakingrecipe",storageBucket:"mybakingrecipe.appspot.com",messagingSenderId:"915152243690",appId:"1:915152243690:web:eabd6afc6124e887434093",measurementId:"G-R8B8QCRYLB",status:"production"};p.a.initializeApp(g);const b=p.a.auth(),E=p.a.firestore,v=p.a.firestore(),h=new p.a.auth.GoogleAuthProvider,I=(p.a.storage(),(e,t)=>{sessionStorage.setItem(e,t)});var f=a(7);const y={userId:"",displayName:""},{actions:N,reducer:O}=Object(d.b)({name:"user",initialState:y,reducers:{setUser:(e,{payload:{name:t,value:a}})=>({...e,[t]:a}),clearUser:e=>({...e,...y})}}),j=()=>async e=>{try{const{user:t}=await(async()=>await b.signInWithPopup(h))(),a=(null==t?void 0:t.email)||"";I("user",a),e(N.setUser({name:"userId",value:a}))}catch(e){throw new Error(e.message)}},k=()=>async e=>{var t;await(async()=>{await b.signOut()})(),t="user",sessionStorage.removeItem(t),e(N.clearUser())},R=()=>e=>{setTimeout(()=>{const t=b.currentUser,a=(null==t?void 0:t.email)||(c="user",sessionStorage.getItem(c))||"";var c;Object(f.d)(a)?(I("user",a),e(N.setUser({name:"userId",value:a}))):e(N.clearUser())},500)},{setUser:w,clearUser:B}=N;var L=O;var S=()=>{const e=Object(l.b)(),{user:{userId:t}}=Object(l.c)(e=>({user:e.user}));return n.a.createElement(u.a,{userId:t,onSignIn:()=>{e(j())},onSignOut:()=>{e(k())}})},U=a(37);var C=()=>n.a.createElement(U.a,null);var F=({root:e=null,target:t,onIntersect:a,threshold:n=1,rootMargin:r="50px"})=>{Object(c.useEffect)(()=>{const c=new IntersectionObserver(a,{root:e,rootMargin:r,threshold:n});if(!Object(f.c)(t))return c.observe(t),()=>c.unobserve(t)},[t,e,r,a,n])},A=a(38);const D=({recipesBook:e})=>Object(f.c)(e.length)?n.a.createElement("div",null,"Empty"):n.a.createElement("ul",{className:"recipeList"},e.map(e=>n.a.createElement(A.a,{key:e.id,recipe:e})));var M=n.a.memo(D);var P=()=>{const{recipes:e}=Object(l.c)(e=>({recipes:e.recipes})),{recipesBook:t}=e;return Object(f.c)(t.length)?n.a.createElement(m,null):n.a.createElement("article",null,n.a.createElement(M,{recipesBook:t}))};const q=async e=>{const t=v.collection("recipes");let a;var c;return a=Object(f.c)(e)?await t.orderBy("created","desc").limit(12).get():await t.orderBy("created","desc").startAfter((c=(null==e?void 0:e.created)||"",E.Timestamp.fromDate(new Date(c)))).limit(12).get(),a.docs},{actions:x,reducer:z}=Object(d.b)({name:"recipes",initialState:{recipesBook:[],lastRecipe:{recipe:null,isLast:!1}},reducers:{setRecipes:(e,{payload:t})=>({...e,recipesBook:[...t]}),setLastRecipe:(e,{payload:{name:t,value:a}})=>({...e,lastRecipe:{...e.lastRecipe,[t]:a}}),addRecipes:(e,{payload:t})=>({...e,recipesBook:[...e.recipesBook,...t]})}}),{setRecipes:G,setLastRecipe:Q,addRecipes:T}=x;var _=z;var H=()=>{const e=Object(l.b)(),[t,a]=Object(c.useState)(null);return F({target:t,onIntersect:([{isIntersecting:t}])=>{t&&e(async(e,t)=>{const{recipes:{lastRecipe:{recipe:a,isLast:c}}}=t();if(c)return;const n=await q(a);if(Object(f.c)(n))return void e(x.setRecipes([]));const r=n.map(e=>Object(f.b)(e)),s=r.length<f.a;e(x.addRecipes(r)),e(x.setLastRecipe({name:"recipe",value:r.splice(-1)[0]})),e(x.setLastRecipe({name:"isLast",value:s}))})}}),n.a.createElement(n.a.Fragment,null,n.a.createElement(P,null),n.a.createElement("div",{ref:a}))};var J=()=>{const e=Object(l.b)();return Object(c.useEffect)(()=>{e(R())},[e]),n.a.createElement(n.a.Fragment,null,n.a.createElement(c.Suspense,{fallback:n.a.createElement(m,null)},n.a.createElement(S,null),n.a.createElement("div",{className:"main"},n.a.createElement(o.c,null,n.a.createElement(o.a,{exact:!0,path:"/",component:H}),n.a.createElement(o.a,{component:C})))))},K=a(18);var W=Object(K.b)({user:L,recipes:_});var Y=Object(d.a)({reducer:W});s.a.render(n.a.createElement(l.a,{store:Y},n.a.createElement(i.a,{basename:"/MyBakingRecipeVol2"},n.a.createElement(J,null))),document.getElementById("app"))},7:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return i}));const c=12,n=e=>!e,r=e=>!n(e),s=e=>t=>e.split(t)[0],l=e=>e.toDate().toISOString(),i=e=>{const{created:t,updated:a}=e.data();return{...e.data(),id:e.id,created:l(t),updated:l(a)}}}},[[54,1,4,11,8,7,12,10,5,14,9,6,13,3,2]]]);