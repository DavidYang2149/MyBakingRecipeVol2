(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{60:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(25),l=a.n(i),c=a(6),s=a(17),m=a(7);var o=()=>r.a.createElement("div",{className:"div-modal"},r.a.createElement("div",{className:"div-loading-animation"}));const d="https://davidyang2149.github.io/MyBakingRecipeVol2/static/css/",p=e=>!e,u=e=>e.toDate().toISOString(),g=e=>{const{created:t,updated:a}=e.data(),{userId:n,title:r,product:i,category:l,newIngredient:c,ingredients:s,description:m,upload:o,image:d,show:p}=e.data();return{id:e.id,userId:n,title:r,product:i,category:l,newIngredient:c,ingredients:s,description:m,upload:o,image:d,show:p,created:u(t),updated:u(a)}};var E=({userId:e,onSignIn:t,onSignOut:a})=>{return r.a.createElement("nav",{className:"nav-header"},r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{className:"img-home",src:d+"assets/images/home.svg",alt:"Home"})),r.a.createElement(s.b,{to:"/"},r.a.createElement("h1",{className:"h1-home"},"My Baking Recipe"))),e?r.a.createElement("div",{className:"div-user-info"},r.a.createElement("p",{className:"p-user-name"},r.a.createElement(s.b,{to:"/"},(n=e,e=>n.split(e)[0])("@"))),r.a.createElement("button",{className:"button-header",type:"button"},"New Recipe"),r.a.createElement("button",{className:"button-header",type:"button",onClick:a},"Logout"),r.a.createElement("img",{className:"img-user-icon",src:d+"assets/images/new-recipe.svg",alt:"New Recipe"}),r.a.createElement("img",{className:"img-user-icon",src:d+"assets/images/close-outline.svg",onClick:a,alt:"Logout"})):r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"button-header",type:"button",onClick:t},"Sign in (Google)"),r.a.createElement("img",{className:"img-user-icon",src:d+"assets/images/login-google.svg",onClick:t,alt:"singIn"})));var n},b=a(21),h=a(24);a(53),a(55),a(58);var v={apiKey:"AIzaSyBWq2ijQg3f9QqIx3gDKsYda0wIeed5zqE",authDomain:"mybakingrecipe.firebaseapp.com",databaseURL:"https://mybakingrecipe-default-rtdb.firebaseio.com",projectId:"mybakingrecipe",storageBucket:"mybakingrecipe.appspot.com",messagingSenderId:"915152243690",appId:"1:915152243690:web:eabd6afc6124e887434093",measurementId:"G-R8B8QCRYLB",status:"production"};h.a.initializeApp(v);const w=h.a.auth(),y=h.a.firestore,I=h.a.firestore(),N=new h.a.auth.GoogleAuthProvider,f=(h.a.storage(),(e,t)=>{sessionStorage.setItem(e,t)}),k={userId:"",displayName:""},{actions:R,reducer:j}=Object(b.b)({name:"user",initialState:k,reducers:{setUser:(e,{payload:{name:t,value:a}})=>({...e,[t]:a}),clearUser:e=>({...e,...k})}}),O=()=>async e=>{try{const{user:t}=await(async()=>await w.signInWithPopup(N))(),a=(null==t?void 0:t.email)||"";f("user",a),e(R.setUser({name:"userId",value:a}))}catch(e){throw new Error(e.message)}},C=()=>async e=>{var t;await(async()=>{await w.signOut()})(),t="user",sessionStorage.removeItem(t),e(R.clearUser())},S=()=>e=>{setTimeout(()=>{const t=w.currentUser,a=(null==t?void 0:t.email)||(n="user",sessionStorage.getItem(n))||"";var n;p(a)?e(R.clearUser()):(f("user",a),e(R.setUser({name:"userId",value:a})))},500)},{setUser:x,clearUser:B}=R;var F=j;var U=()=>{const e=Object(c.c)(),{user:{userId:t}}=Object(c.d)(e=>({user:e.user}));return r.a.createElement(E,{userId:t,onSignIn:()=>{e(O())},onSignOut:()=>{e(C())}})};var L=()=>r.a.createElement("div",{className:"div-not-found-modal"},r.a.createElement("img",{className:"img-not-found-image",src:d+"assets/images/page-not-found.svg",alt:"recipe"}),r.a.createElement("p",{className:"p-not-found-title"},"해당 페이지를 찾을 수 없습니다."));var D=()=>r.a.createElement(L,null);const M=({title:e})=>r.a.createElement("p",{className:"p-recipe-title"},e);var P=r.a.memo(M);const K=({user:e,created:t})=>r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"span-recipe-writer"},e)," ",r.a.createElement("span",{className:"span-recipe-write-date"},t.substr(0,10)),r.a.createElement("hr",{className:"hr-recipe-write-line"}));var A=r.a.memo(K);const q=({image:e})=>r.a.createElement("section",null,r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"displayImage",className:"label-recipe-image"},"이미지"),r.a.createElement("img",{id:"displayImage",className:"img-recipe-image",src:e||"https://davidyang2149.github.io/MyBakingRecipeVol2/static/css/assets/images/cookie.jpeg",width:"200px",height:"200px",alt:"recipe"})));var z=r.a.memo(q);const G={0:"선택",1:"쿠키",2:"구움과자",3:"케이크",4:"빵",5:"마카롱",6:"기타"},Q=({title:e,category:t,product:a,onChange:n})=>r.a.createElement("section",null,r.a.createElement("label",{htmlFor:"title",className:(n?"duty":"")+" label-recipe block"},"레시피명"),r.a.createElement("input",{type:"text",id:"title",name:"title",className:"input-recipe block width-60",value:e,onChange:n,disabled:!n}),r.a.createElement("label",{htmlFor:"category",className:(n?"duty":"")+" label-recipe inline-block width-30"},"카테고리"),r.a.createElement("label",{htmlFor:"product",className:(n?"duty":"")+" label-recipe inline-block width-20"},"생산량"),r.a.createElement("div",null,r.a.createElement("select",{id:"category",name:"category",className:"select-recipe width-30",value:t,onChange:n,disabled:!n},Object.entries(G).map(([e,t])=>r.a.createElement("option",{key:e,value:e},t))),r.a.createElement("input",{type:"number",min:"0",max:"1000000000",id:"product",name:"product",className:"input-recipe inline-block width-20",value:a,onChange:n,disabled:!n}),r.a.createElement("span",{className:"span-recipe-count inline-block"},"개")));var V=r.a.memo(Q);const H=({description:e,onChange:t})=>r.a.createElement("section",null,r.a.createElement("label",{htmlFor:"description",className:(t?"duty":"")+" label-recipe-description block"},"만드는 방법"),r.a.createElement("textarea",{id:"description",name:"description",className:"textarea-recipe",value:e,onChange:t,disabled:!t}));var J=r.a.memo(H),T=a(35);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Y=({id:e,ingredient:t,weight:a,onChangeIngredient:n,onRemoveIngredient:i,provided:l})=>l?r.a.createElement("li",W({ref:l.innerRef},l.dragHandleProps,l.draggableProps),r.a.createElement("span",{className:"span-hamburger"}),r.a.createElement("input",{type:"text",id:"ingredient-"+e,name:"ingredient-"+e,className:"input-ingredient width-24",value:t,onChange:n}),r.a.createElement("input",{type:"number",min:"0",max:"1000000000",id:"weight-"+e,name:"weight-"+e,className:"input-ingredient width-13",value:a,onChange:n}),r.a.createElement("span",{className:"span-ingredient-count"},"g"),r.a.createElement("button",{type:"button",className:"button-ingredient-delete",onClick:i,value:e},"삭제")):r.a.createElement("li",null,r.a.createElement("input",{type:"text",id:"ingredient-"+e,name:"ingredient-"+e,className:"input-ingredient width-30",value:t,disabled:!0}),r.a.createElement("input",{type:"number",min:"0",max:"1000000000",id:"weight-"+e,name:"weight-"+e,className:"input-ingredient width-20",value:a,onChange:n,disabled:!0}),r.a.createElement("span",{className:"span-ingredient-count"},"g"));var $=r.a.memo(Y);function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}const Z=({ingredients:e,onChangeIngredient:t,onRemoveIngredient:a,onDragEndIngredient:n})=>n?r.a.createElement("section",null,r.a.createElement(T.a,{onDragEnd:n},r.a.createElement(T.c,{droppableId:"ingredients"},n=>r.a.createElement("ul",X({className:"ingredients",ref:n.innerRef},n.droppableProps),e.map(({id:e,ingredient:n,weight:i},l)=>r.a.createElement(T.b,{key:e.toString(),draggableId:e.toString(),index:l},l=>r.a.createElement($,{key:e,id:e,ingredient:n,weight:i,onChangeIngredient:t,onRemoveIngredient:a,provided:l}))),n.placeholder)))):r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",{className:"label-ingredient-name inline-block width-32"},"원재료"),r.a.createElement("label",{className:"label-ingredient-name inline-block width-20"},"용량")),e.map(({id:e,ingredient:n,weight:i})=>r.a.createElement($,{key:e,id:e,ingredient:n,weight:i,onChangeIngredient:t,onRemoveIngredient:a}))));var _=r.a.memo(Z);var ee=()=>{Object(c.c)();const e=Object(m.f)(),[t,a]=Object(n.useState)(!1),{user:i,recipe:l}=Object(c.d)(e=>({user:e.user,recipe:e.recipe})),{id:d,userId:p,title:u,category:g,product:E,ingredients:b,description:h,image:v,created:w}=l,y=Object(n.useCallback)(()=>{window.confirm("레시피를 삭제하시겠습니까?")&&(a(!0),e.push("/"))},[e]);return d?r.a.createElement("article",null,r.a.createElement(P,{title:u}),r.a.createElement(A,{user:p,created:w||""}),r.a.createElement(z,{image:v||""}),r.a.createElement(V,{title:u,category:g,product:E}),r.a.createElement(_,{ingredients:b}),r.a.createElement(J,{description:h}),!!p&&p===i.userId&&r.a.createElement("section",null,r.a.createElement(s.b,{to:"/recipewrite/"+d},r.a.createElement("button",{type:"button",className:"button-recipe-owner"},"수정하기")),r.a.createElement("button",{type:"button",className:"button-recipe-owner",onClick:y,disabled:t},"삭제하기")),t&&r.a.createElement(o,null)):r.a.createElement(o,null)};const te=async e=>{const t=I.collection("recipes");let a;var n;return a=p(e)?await t.orderBy("created","desc").limit(12).get():await t.orderBy("created","desc").startAfter((n=(null==e?void 0:e.created)||"",y.Timestamp.fromDate(new Date(n)))).limit(12).get(),a.docs},ae={id:"",userId:"",title:"",category:0,product:0,ingredients:[],newIngredient:{id:0,ingredient:"",weight:0},description:"",upload:"",image:"",show:!1,created:"",updated:""},{actions:ne,reducer:re}=Object(b.b)({name:"recipe",initialState:ae,reducers:{setRecipe:(e,{payload:t})=>({...e,...t,newIngredient:{id:t.ingredients.length+1,ingredient:"",weight:0}}),changeRecipe:(e,{payload:{name:t,value:a}})=>({...e,[t]:a}),clearRecipe:e=>({...e,...ae})}}),ie=e=>async t=>{const a=await(async({id:e})=>{const t=I.collection("recipes");return await t.doc(e).get()})({id:e});a.exists?t(ne.setRecipe(g(a))):t(ne.setRecipe(ae))},{setRecipe:le,changeRecipe:ce,clearRecipe:se}=ne;var me=re;var oe=()=>{const e=Object(c.c)(),{id:t}=Object(m.g)();return Object(n.useEffect)(()=>{e(se()),e(ie(t))},[e,t]),r.a.createElement(ee,null)};var de=({root:e=null,target:t,onIntersect:a,threshold:r=1,rootMargin:i="50px"})=>{Object(n.useEffect)(()=>{const n=new IntersectionObserver(a,{root:e,rootMargin:i,threshold:r});if(!p(t))return n.observe(t),()=>n.unobserve(t)},[t,e,i,a,r])};var pe=({recipe:e})=>{const{id:t,image:a,title:n,description:i,created:l,userId:c}=e,m=d+"assets/images/cookie.jpeg";return r.a.createElement("li",{className:"li-recipe-item"},r.a.createElement(s.b,{to:"/recipe/"+t},r.a.createElement("figure",{className:"figure-card-image",style:{backgroundImage:`url(${a||m})`}},r.a.createElement("img",{src:a||m,alt:"recipe"})),r.a.createElement("div",{className:"div-card-description"},r.a.createElement("h1",null,n),r.a.createElement("p",null,i.length>30?i.substring(0,30)+"...":i),r.a.createElement("p",{className:"p-card-created"},null==l?void 0:l.substr(0,10)),r.a.createElement("p",null,"by"," ",r.a.createElement("strong",null,c.split("@")[0])))))};const ue=({recipesBook:e})=>p(e.length)?r.a.createElement("div",null,"Empty"):r.a.createElement("ul",{className:"ul-recipe-list"},e.map(e=>r.a.createElement(pe,{key:e.id,recipe:e})));var ge=r.a.memo(ue);var Ee=()=>{const{recipes:e}=Object(c.d)(e=>({recipes:e.recipes})),{recipesBook:t}=e;return p(t.length)?r.a.createElement(o,null):r.a.createElement("article",null,r.a.createElement(ge,{recipesBook:t}))};const{actions:be,reducer:he}=Object(b.b)({name:"recipes",initialState:{recipesBook:[],lastRecipe:{recipe:null,isLast:!1}},reducers:{setRecipes:(e,{payload:t})=>({...e,recipesBook:[...t]}),setLastRecipe:(e,{payload:{name:t,value:a}})=>({...e,lastRecipe:{...e.lastRecipe,[t]:a}}),addRecipes:(e,{payload:t})=>({...e,recipesBook:[...e.recipesBook,...t]})}}),{setRecipes:ve,setLastRecipe:we,addRecipes:ye}=be;var Ie=he;var Ne=()=>{const e=Object(c.c)(),[t,a]=Object(n.useState)(null);return de({target:t,onIntersect:([{isIntersecting:t}])=>{t&&e(async(e,t)=>{const{recipes:{lastRecipe:{recipe:a,isLast:n}}}=t();if(n)return;const r=await te(a);if(p(r))return void e(be.setRecipes([]));const i=r.map(e=>g(e)),l=i.length<12;e(be.addRecipes(i)),e(be.setLastRecipe({name:"recipe",value:i.splice(-1)[0]})),e(be.setLastRecipe({name:"isLast",value:l}))})}}),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ee,null),r.a.createElement("div",{ref:a}))};const fe=({newId:e,newIngredient:t,NewIngredientRef:a,onChangeNewIngredient:n,onKeyUpSetNewIngredient:i,onClickSetNewIngredient:l})=>r.a.createElement("section",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("label",{className:"label-ingredient-name inline-block width-32",htmlFor:"ingredient-"+e},"원재료"),r.a.createElement("label",{className:"label-ingredient-name inline-block width-20",htmlFor:"weight-"+e},"용량")),r.a.createElement("li",null,r.a.createElement("input",{type:"text",id:"ingredient-"+e,name:"ingredient-"+e,value:t.ingredient,className:"input-ingredient width-30",onChange:n,onKeyUp:i,ref:a}),r.a.createElement("input",{type:"number",min:"0",max:"1000000000",id:"weight-"+e,name:"weight-"+e,value:t.weight,className:"input-ingredient width-20",onChange:n,onKeyUp:i}),r.a.createElement("span",{className:"span-ingredient-count"},"g"),r.a.createElement("button",{type:"button",className:"button-ingredient-add",onClick:l,disabled:!t.ingredient||!t.weight},"추가하기"))));var ke=r.a.memo(fe);const Re=({upload:e,image:t,fileInputRef:a,onFileChange:n,onClearFile:i,onRemoveFile:l})=>r.a.createElement("section",null,!!t&&r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"displayImage"},"이미지"),r.a.createElement("img",{id:"displayImage",src:t,width:"200px",height:"200px",alt:"displayImage"}),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:l},"이미지 삭제하기"))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"image"},"레시피 이미지"),r.a.createElement("input",{id:"image",type:"file",accept:"image/gif, image/jpeg, image/jpg, image/png",onChange:n,ref:a}),r.a.createElement("div",null,"3MB 이하 이미지(jpg, jpeg, png, gif)만 업로드 가능합니다."),!!e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("img",{src:e,width:"200px",height:"200px",alt:"preview"})),r.a.createElement("div",null,r.a.createElement("button",{type:"button",onClick:i},"이미지 비우기")))));var je=r.a.memo(Re);var Oe=()=>{const e=Object(c.c)(),[t,a]=(Object(m.f)(),Object(n.useState)(!1)),i=Object(n.useRef)(null),l=Object(n.useRef)(null),{user:s,recipe:d}=Object(c.d)(e=>({user:e.user,recipe:e.recipe})),{id:p,userId:u,title:g,category:E,product:b,ingredients:h,newIngredient:v,description:w,upload:y,image:I}=d,N=Object(n.useCallback)(t=>{const{name:a,value:n}=t.target;e(ce({name:a,value:n}))},[e]);return r.a.createElement("article",null,r.a.createElement(P,{title:u?g+" 편집":"레시피 제작"}),r.a.createElement(V,{title:g,category:E,product:b,onChangeRecipe:N}),r.a.createElement(ke,{newId:h.length+1,newIngredient:v,NewIngredientRef:l}),r.a.createElement(_,{ingredients:h}),r.a.createElement(J,{description:w}),r.a.createElement(je,{upload:y,image:I,fileInputRef:i}),r.a.createElement("section",null,r.a.createElement("button",{type:"button",disabled:t||!g.trim()||!E||!b||!w.trim()},u?"수정완료":"저장하기"),!!u&&r.a.createElement("button",{type:"button",disabled:t},"삭제하기")),t&&r.a.createElement(o,null))};var Ce=()=>{const e=Object(c.c)(),{id:t}=Object(m.g)();return Object(n.useEffect)(()=>{e(se()),e(ie(t))},[e,t]),r.a.createElement(Oe,null)};var Se=()=>{const e=Object(c.c)();return Object(n.useEffect)(()=>{e(S())},[e]),r.a.createElement(r.a.Fragment,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement(o,null)},r.a.createElement(U,null),r.a.createElement("div",{className:"div-main"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:Ne}),r.a.createElement(m.a,{path:"/recipe/:id",component:oe}),r.a.createElement(m.a,{path:"/recipe/write/:id",component:Ce}),r.a.createElement(m.a,{component:D})))))},xe=a(16);var Be=Object(xe.c)({user:F,recipe:me,recipes:Ie});var Fe=Object(b.a)({reducer:Be});l.a.render(r.a.createElement(c.a,{store:Fe},r.a.createElement(s.a,{basename:"/MyBakingRecipeVol2"},r.a.createElement(Se,null))),document.getElementById("app"))}},[[60,1,4,12,9,8,13,11,6,14,10,16,7,15,2,3,5]]]);