(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n),r=a(16),s=a(7);a(46);t.a=({userId:t,onSignIn:a,onSignOut:n})=>{const l=e.env.PUBLIC_URL||"http://localhost:9092/";return c.a.createElement("nav",{className:"header"},c.a.createElement("div",null,c.a.createElement(r.b,{to:"/"},c.a.createElement("img",{className:"homeImg",src:"../assets/images/home.svg",alt:"Home"})),c.a.createElement(r.b,{to:"/"},c.a.createElement("h1",{className:"homeH1"},"My Baking Recipe"))),t?c.a.createElement("div",{className:"userInfo"},c.a.createElement("p",{className:"userName"},c.a.createElement(r.b,{to:"/"},Object(s.e)(t)("@"))),c.a.createElement("button",{className:"headerButton",type:"button"},"New Recipe"),c.a.createElement("button",{className:"headerButton",type:"button",onClick:n},"Logout"),c.a.createElement("img",{className:"userIcon",src:"../assets/images/new-recipe.svg",alt:"New Recipe"}),c.a.createElement("img",{className:"userIcon",src:"../assets/images/close-outline.svg",onClick:n,alt:"Logout"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"headerButton",type:"button",onClick:a},"Sign in (Google)"),c.a.createElement("img",{className:"userIcon",src:l+"assets/images/login-google.svg",onClick:a,alt:"singIn"})))}}).call(this,a(23))},37:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n);a(52);t.a=()=>c.a.createElement("div",{className:"theNotFoundModal"},c.a.createElement("img",{className:"theNotFoundImage",src:(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/page-not-found.svg",alt:"recipe"}),c.a.createElement("p",{className:"theNotFoundTitle"},"해당 페이지를 찾을 수 없습니다."))}).call(this,a(23))},38:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n),r=a(16),s=a(7);a(53);t.a=({recipe:t})=>{const{id:a,image:n,title:l,description:i,created:o,userId:m}=t,u=(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/cookie.jpeg";return c.a.createElement("li",{className:"recipeItem"},c.a.createElement(r.b,{to:"/recipe/"+a},c.a.createElement("figure",{className:"card-image",style:{backgroundImage:`url(${n||u})`}},c.a.createElement("img",{src:n||u,alt:"recipe"})),c.a.createElement("div",{className:"card-desc"},c.a.createElement("h1",null,l),c.a.createElement("p",null,i.length>30?i.substring(0,30)+"...":i),c.a.createElement("p",{className:"card-created"},null==o?void 0:o.substr(0,10)),c.a.createElement("p",null,"by"," ",c.a.createElement("strong",null,Object(s.e)(m)("@"))))))}}).call(this,a(23))},46:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(25),s=a.n(r),l=a(15),i=a(16),o=a(5);var m=()=>c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"loadingAnimation"})),u=a(34),d=a(19),p=a(20);a(48),a(55),a(50);var g={apiKey:"AIzaSyBWq2ijQg3f9QqIx3gDKsYda0wIeed5zqE",authDomain:"mybakingrecipe.firebaseapp.com",databaseURL:"https://mybakingrecipe-default-rtdb.firebaseio.com",projectId:"mybakingrecipe",storageBucket:"mybakingrecipe.appspot.com",messagingSenderId:"915152243690",appId:"1:915152243690:web:eabd6afc6124e887434093",measurementId:"G-R8B8QCRYLB",status:"production"};p.a.initializeApp(g);const b=p.a.auth(),E=p.a.firestore,v=p.a.firestore(),h=new p.a.auth.GoogleAuthProvider,I=(p.a.storage(),(e,t)=>{sessionStorage.setItem(e,t)});var f=a(7);const y={userId:"",displayName:""},{actions:N,reducer:O}=Object(d.b)({name:"user",initialState:y,reducers:{setUser:(e,{payload:{name:t,value:a}})=>({...e,[t]:a}),clearUser:e=>({...e,...y})}}),j=()=>async e=>{try{const{user:t}=await(async()=>await b.signInWithPopup(h))(),a=(null==t?void 0:t.email)||"";I("user",a),e(N.setUser({name:"userId",value:a}))}catch(e){throw new Error(e.message)}},k=()=>async e=>{var t;await(async()=>{await b.signOut()})(),t="user",sessionStorage.removeItem(t),e(N.clearUser())},R=()=>e=>{setTimeout(()=>{const t=b.currentUser,a=(null==t?void 0:t.email)||(n="user",sessionStorage.getItem(n))||"";var n;Object(f.d)(a)?(I("user",a),e(N.setUser({name:"userId",value:a}))):e(N.clearUser())},500)},{setUser:w,clearUser:B}=N;var L=O;var S=()=>{const e=Object(l.b)(),{user:{userId:t}}=Object(l.c)(e=>({user:e.user}));return c.a.createElement(u.a,{userId:t,onSignIn:()=>{e(j())},onSignOut:()=>{e(k())}})},U=a(37);var C=()=>c.a.createElement(U.a,null);var F=({root:e=null,target:t,onIntersect:a,threshold:c=1,rootMargin:r="50px"})=>{Object(n.useEffect)(()=>{const n=new IntersectionObserver(a,{root:e,rootMargin:r,threshold:c});if(!Object(f.c)(t))return n.observe(t),()=>n.unobserve(t)},[t,e,r,a,c])},A=a(38);const D=({recipesBook:e})=>Object(f.c)(e.length)?c.a.createElement("div",null,"Empty"):c.a.createElement("ul",{className:"recipeList"},e.map(e=>c.a.createElement(A.a,{key:e.id,recipe:e})));var M=c.a.memo(D);var P=()=>{const{recipes:e}=Object(l.c)(e=>({recipes:e.recipes})),{recipesBook:t}=e;return Object(f.c)(t.length)?c.a.createElement(m,null):c.a.createElement("article",null,c.a.createElement(M,{recipesBook:t}))};const q=async e=>{const t=v.collection("recipes");let a;var n;return a=Object(f.c)(e)?await t.orderBy("created","desc").limit(12).get():await t.orderBy("created","desc").startAfter((n=(null==e?void 0:e.created)||"",E.Timestamp.fromDate(new Date(n)))).limit(12).get(),a.docs},{actions:x,reducer:z}=Object(d.b)({name:"recipes",initialState:{recipesBook:[],lastRecipe:{recipe:null,isLast:!1}},reducers:{setRecipes:(e,{payload:t})=>({...e,recipesBook:[...t]}),setLastRecipe:(e,{payload:{name:t,value:a}})=>({...e,lastRecipe:{...e.lastRecipe,[t]:a}}),addRecipes:(e,{payload:t})=>({...e,recipesBook:[...e.recipesBook,...t]})}}),{setRecipes:G,setLastRecipe:Q,addRecipes:T}=x;var _=z;var H=()=>{const e=Object(l.b)(),[t,a]=Object(n.useState)(null);return F({target:t,onIntersect:([{isIntersecting:t}])=>{t&&e(async(e,t)=>{const{recipes:{lastRecipe:{recipe:a,isLast:n}}}=t();if(n)return;const c=await q(a);if(Object(f.c)(c))return void e(x.setRecipes([]));const r=c.map(e=>Object(f.b)(e)),s=r.length<f.a;e(x.addRecipes(r)),e(x.setLastRecipe({name:"recipe",value:r.splice(-1)[0]})),e(x.setLastRecipe({name:"isLast",value:s}))})}}),c.a.createElement(c.a.Fragment,null,c.a.createElement(P,null),c.a.createElement("div",{ref:a}))};var J=()=>{const e=Object(l.b)();return Object(n.useEffect)(()=>{e(R())},[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(n.Suspense,{fallback:c.a.createElement(m,null)},c.a.createElement(S,null),c.a.createElement("div",{className:"main"},c.a.createElement(o.c,null,c.a.createElement(o.a,{exact:!0,path:"/",component:H}),c.a.createElement(o.a,{component:C})))))},K=a(18);var W=Object(K.b)({user:L,recipes:_});var Y=Object(d.a)({reducer:W});s.a.render(c.a.createElement(l.a,{store:Y},c.a.createElement(i.a,{basename:"/MyBakingRecipeVol2"},c.a.createElement(J,null))),document.getElementById("app"))},7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return i}));const n=12,c=e=>!e,r=e=>!c(e),s=e=>t=>e.split(t)[0],l=e=>e.toDate().toISOString(),i=e=>{const{created:t,updated:a}=e.data();return{...e.data(),id:e.id,created:l(t),updated:l(a)}}}},[[54,1,4,11,8,7,12,10,5,14,9,6,13,3,2]]]);