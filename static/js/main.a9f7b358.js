(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return l}));var n=a(22);a(54),a(60),a(56);var c={apiKey:"AIzaSyBWq2ijQg3f9QqIx3gDKsYda0wIeed5zqE",authDomain:"mybakingrecipe.firebaseapp.com",databaseURL:"https://mybakingrecipe-default-rtdb.firebaseio.com",projectId:"mybakingrecipe",storageBucket:"mybakingrecipe.appspot.com",messagingSenderId:"915152243690",appId:"1:915152243690:web:eabd6afc6124e887434093",measurementId:"G-R8B8QCRYLB",status:"production"};n.a.initializeApp(c);const r=n.a.auth(),s=n.a.firestore,i=n.a.firestore(),l=new n.a.auth.GoogleAuthProvider;n.a.storage()},21:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return d}));var n=a(20),c=a(19);const r=(e,t)=>{sessionStorage.setItem(e,t)};var s=a(7);const i={userId:"",displayName:""},{actions:l,reducer:o}=Object(n.b)({name:"user",initialState:i,reducers:{setUser:(e,{payload:{name:t,value:a}})=>({...e,[t]:a}),clearUser:e=>({...e,...i})}}),u=()=>async e=>{try{const{user:t}=await(async()=>await c.a.signInWithPopup(c.d))(),a=(null==t?void 0:t.email)||"";r("user",a),e(l.setUser({name:"userId",value:a}))}catch(e){throw new Error(e.message)}},m=()=>async e=>{var t;await(async()=>{await c.a.signOut()})(),t="user",sessionStorage.removeItem(t),e(l.clearUser())},d=()=>e=>{setTimeout(()=>{const t=c.a.currentUser,a=(null==t?void 0:t.email)||(n="user",sessionStorage.getItem(n))||"";var n;Object(s.d)(a)?(r("user",a),e(l.setUser({name:"userId",value:a}))):e(l.clearUser())},500)},{setUser:p,clearUser:g}=l;t.a=o},30:function(e,t,a){"use strict";a.d(t,"b",(function(){return o}));var n=a(20),c=a(19),r=a(7);const s=async e=>{const t=c.b.collection("recipes");let a;var n;return a=Object(r.c)(e)?await t.orderBy("created","desc").limit(12).get():await t.orderBy("created","desc").startAfter((n=(null==e?void 0:e.created)||"",c.c.Timestamp.fromDate(new Date(n)))).limit(12).get(),a.docs},{actions:i,reducer:l}=Object(n.b)({name:"recipes",initialState:{recipesBook:[],lastRecipe:{recipe:null,isLast:!1}},reducers:{setRecipes:(e,{payload:t})=>({...e,recipesBook:[...t]}),setLastRecipe:(e,{payload:{name:t,value:a}})=>({...e,lastRecipe:{...e.lastRecipe,[t]:a}}),addRecipes:(e,{payload:t})=>({...e,recipesBook:[...e.recipesBook,...t]})}}),o=()=>async(e,t)=>{const{recipes:{lastRecipe:{recipe:a,isLast:n}}}=t();if(n)return;const c=await s(a);if(Object(r.c)(c))return void e(i.setRecipes([]));const l=c.map(e=>Object(r.b)(e)),o=l.length<r.a;e(i.addRecipes(l)),e(i.setLastRecipe({name:"recipe",value:l.splice(-1)[0]})),e(i.setLastRecipe({name:"isLast",value:o}))},{setRecipes:u,setLastRecipe:m,addRecipes:d}=i;t.a=l},37:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n),r=a(16),s=a(7);a(52);t.a=({userId:t,onSignIn:a,onSignOut:n})=>c.a.createElement("nav",{className:"header"},c.a.createElement("div",null,c.a.createElement(r.b,{to:"/"},c.a.createElement("img",{className:"homeImg",src:(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/home.svg",alt:"Home"})),c.a.createElement(r.b,{to:"/"},c.a.createElement("h1",{className:"homeH1"},"My Baking Recipe"))),t?c.a.createElement("div",{className:"userInfo"},c.a.createElement("p",{className:"userName"},c.a.createElement(r.b,{to:"/"},Object(s.e)(t)("@"))),c.a.createElement("button",{className:"headerButton",type:"button"},"New Recipe"),c.a.createElement("button",{className:"headerButton",type:"button",onClick:n},"Logout"),c.a.createElement("img",{className:"userIcon",src:"assets/images/new-recipe.svg",alt:"New Recipe"}),c.a.createElement("img",{className:"userIcon",src:"assets/images/close-outline.svg",onClick:n,alt:"Logout"})):c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{className:"headerButton",type:"button",onClick:a},"Sign in (Google)"),c.a.createElement("img",{className:"userIcon",src:"assets/images/login-google.svg",onClick:a,alt:"singIn"})))}).call(this,a(24))},40:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n);a(58);t.a=()=>c.a.createElement("div",{className:"theNotFoundModal"},c.a.createElement("img",{className:"theNotFoundImage",src:(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/page-not-found.svg",alt:"recipe"}),c.a.createElement("p",{className:"theNotFoundTitle"},"해당 페이지를 찾을 수 없습니다."))}).call(this,a(24))},41:function(e,t,a){"use strict";(function(e){var n=a(1),c=a.n(n),r=a(16),s=a(7);a(59);t.a=({recipe:t})=>{const{id:a,image:n,title:i,description:l,created:o,userId:u}=t,m=(e.env.PUBLIC_URL||"http://localhost:9092/")+"assets/images/cookie.jpeg";return c.a.createElement("li",{className:"recipeItem"},c.a.createElement(r.b,{to:"/recipe/"+a},c.a.createElement("figure",{className:"card-image",style:{backgroundImage:`url(${n||m})`}},c.a.createElement("img",{src:n||m,alt:"recipe"})),c.a.createElement("div",{className:"card-desc"},c.a.createElement("h1",null,i),c.a.createElement("p",null,l.length>30?l.substring(0,30)+"...":l),c.a.createElement("p",{className:"card-created"},null==o?void 0:o.substr(0,10)),c.a.createElement("p",null,"by"," ",c.a.createElement("strong",null,Object(s.e)(u)("@"))))))}}).call(this,a(24))},42:function(e,t,a){"use strict";var n=a(1),c=a.n(n),r=a(5),s=a(15);var i=()=>c.a.createElement("div",{className:"modal"},c.a.createElement("div",{className:"loadingAnimation"})),l=a(37),o=a(21);var u=()=>{const e=Object(s.b)(),{user:{userId:t}}=Object(s.c)(e=>({user:e.user}));return c.a.createElement(l.a,{userId:t,onSignIn:()=>{e(Object(o.b)())},onSignOut:()=>{e(Object(o.c)())}})},m=a(40);var d=()=>c.a.createElement(m.a,null),p=a(7);var g=({root:e=null,target:t,onIntersect:a,threshold:c=1,rootMargin:r="50px"})=>{Object(n.useEffect)(()=>{const n=new IntersectionObserver(a,{root:e,rootMargin:r,threshold:c});if(!Object(p.c)(t))return n.observe(t),()=>n.unobserve(t)},[t,e,r,a,c])},b=a(41);const E=({recipesBook:e})=>Object(p.c)(e.length)?c.a.createElement("div",null,"Empty"):c.a.createElement("ul",{className:"recipeList"},e.map(e=>c.a.createElement(b.a,{key:e.id,recipe:e})));var v=c.a.memo(E);var f=()=>{const{recipes:e}=Object(s.c)(e=>({recipes:e.recipes})),{recipesBook:t}=e;return Object(p.c)(t.length)?c.a.createElement(i,null):c.a.createElement("article",null,c.a.createElement(v,{recipesBook:t}))},h=a(30);var I=()=>{const e=Object(s.b)(),[t,a]=Object(n.useState)(null);return g({target:t,onIntersect:([{isIntersecting:t}])=>{t&&e(Object(h.b)())}}),c.a.createElement(c.a.Fragment,null,c.a.createElement(f,null),c.a.createElement("div",{ref:a}))};t.a=()=>{const e=Object(s.b)();return Object(n.useEffect)(()=>{e(Object(o.d)())},[e]),c.a.createElement(c.a.Fragment,null,c.a.createElement(n.Suspense,{fallback:c.a.createElement(i,null)},c.a.createElement(u,null),c.a.createElement("div",{className:"main"},c.a.createElement(r.c,null,c.a.createElement(r.a,{exact:!0,path:"/",component:I}),c.a.createElement(r.a,{component:d})))))}},43:function(e,t,a){"use strict";var n=a(20),c=a(18),r=a(21),s=a(30);var i=Object(c.b)({user:r.a,recipes:s.a});const l=Object(n.a)({reducer:i});t.a=l},44:function(e,t,a){"use strict";a.r(t),function(e){var t=a(1),n=a.n(t),c=a(27),r=a.n(c),s=a(15),i=a(16),l=a(42),o=a(43);r.a.render(n.a.createElement(s.a,{store:o.a},n.a.createElement(i.a,{basename:e.env.PUBLIC_URL||""},n.a.createElement(l.a,null))),document.getElementById("app"))}.call(this,a(24))},52:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){},7:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return r})),a.d(t,"e",(function(){return s})),a.d(t,"b",(function(){return l}));const n=12,c=e=>!e,r=e=>!c(e),s=e=>t=>e.split(t)[0],i=e=>e.toDate().toISOString(),l=e=>{const{created:t,updated:a}=e.data();return{...e.data(),id:e.id,created:i(t),updated:i(a)}}}},[[44,1,4,11,8,7,12,10,5,14,9,6,13,3,2]]]);